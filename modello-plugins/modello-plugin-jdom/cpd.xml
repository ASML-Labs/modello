<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
<duplication lines="18" tokens="113">
<file line="779" path="/home/herve/projets/maven/plexus/modello/modello-plugins/modello-plugin-jdom/src/main/java/org/codehaus/modello/plugin/jdom/JDOMWriterGenerator.java"/>
<file line="844" path="/home/herve/projets/maven/plexus/modello/modello-plugins/modello-plugin-jdom/src/main/java/org/codehaus/modello/plugin/jdom/JDOMWriterGenerator.java"/>
<codefragment>
<![CDATA[
        sc.add( "Iterator elIt = element.getChildren( childTag, element.getNamespace() ).iterator();" );
        sc.add( "if ( !elIt.hasNext() )" );
        sc.add( "{" );
        sc.addIndented( "elIt = null;" );
        sc.add( "}" );
        sc.add( "Counter innerCount = new Counter( counter.getDepth() + 1 );" );
        sc.add( "while ( it.hasNext() )" );
        sc.add( "{" );
        sc.indent();
        sc.add( toClass.getName() + " value = (" + toClass.getName() + ") it.next();" );
        sc.add( "Element el;" );
        sc.add( "if ( elIt != null && elIt.hasNext() )" );
        sc.add( "{" );
        sc.indent();
        sc.add( "el = (Element) elIt.next();" );
        sc.add( "if ( ! elIt.hasNext() )" );
        sc.add( "{" );
        sc.addIndented( " elIt = null;" );
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="111">
<file line="804" path="/home/herve/projets/maven/plexus/modello/modello-plugins/modello-plugin-jdom/src/main/java/org/codehaus/modello/plugin/jdom/JDOMWriterGenerator.java"/>
<file line="869" path="/home/herve/projets/maven/plexus/modello/modello-plugins/modello-plugin-jdom/src/main/java/org/codehaus/modello/plugin/jdom/JDOMWriterGenerator.java"/>
<codefragment>
<![CDATA[
        sc.add( "insertAtPreferredLocation( element, el, innerCount );" );
        sc.unindent();
        sc.add( "}" );
        sc.add( "update" + toClass.getName() + "( value, childTag, innerCount, el );" );
        sc.add( "innerCount.increaseCount();" );
        sc.unindent();
        sc.add( "}" );
        sc.add( "if ( elIt != null )" );
        sc.add( "{" );
        sc.indent();
        sc.add( "while ( elIt.hasNext() )" );
        sc.add( "{" );
        sc.indent();
        sc.add( "elIt.next();" );
        sc.add( "elIt.remove();" );
        sc.unindent();
        sc.add( "}" );
        sc.unindent();
        sc.add( "}" );
]]>
</codefragment>
</duplication>
</pmd-cpd>